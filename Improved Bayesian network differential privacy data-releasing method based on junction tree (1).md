# This code is the source code implementation for the paper "Improved Bayesian network differential privacy data-releasing method based on junction tree ."

## Abstract
Data-releasing methods to protect personal privacy have always been a hot issue in the field of privacy protection. Although differential privacy protection method is one of the mainstream privacy-protection methods, it is difficult to apply differential privacy to high-dimensional data due to the impact of dimensional disasters. Although there have been many methods that use differential privacy to process high-dimensional data, the existing methods still have shortcomings. So firstly, this paper proposed the FAPrivBayes algorithm to increase the speed of generating Bayesian networks. This algorithm uses the weighting of nodes to determine the order of nodes joining the network, which reduces the time required to generate the network. Secondly, this paper proposed an improved Bayesian network algorithm JTFAPB based on the JTree algorithm, which adjusts the network obtained by the FAPrivBayes algorithm and increases the privacy budget allocation of each subnet by reducing the number of its subnets. Through theoretical analysis and experimental evaluation, this method can reduce the number of calculations and improve the availability of published data while protecting personal privacy.Please refer to the paper link：https://ieeexplore.ieee.org/xpl/conhome/10196792/proceeding

# Experimental Environment

```
- python==3.7.0
- sklearn==1.5.0numpy
- numpy==1.23.2
- matplotlib==3.1.1
- ...

```

## Experimental Setup

### 1. **Algorithm Description:**
   - **FAPrivBayes Algorithm:** Improves the speed of Bayesian network generation by determining the order of nodes based on node weighting, reducing the time and overhead required.
   - **JTFAPB Algorithm:** Uses the JTree algorithm to modify the Bayesian network structure created by FAPrivBayes, reducing the number of subnets and thus enhancing the privacy budget allocation across the network.

### 2. **Data Sets Used:**
   - Four real data sets were used in the experiments:
     - **NLTCS:** Long-term care research data from the United States.
     - **ACS:** Data from IPUMS-USA 2013 and 2014 ACS sampling.
     - **Adult:** 1994 US Adult Census data.
     - **BR2000:** Data from the 2000 Brazilian Census.

### 3. **Evaluation Metrics:**
 - **α-Way Query Accuracy**: The experiments employed α-way queries (where α=2 and α=3) to assess the accuracy of data distribution achieved by the algorithms FAPrivBayes, JTFAPB, PrivBayes, and APrivBayes. The accuracy was measured using the total variation distance, which quantifies the difference between the original data distribution and the privacy-preserving distribution produced by each algorithm.

- **SVM Classification**: SVM classifiers were trained on synthetic datasets generated by each algorithm to predict specific attributes like going out, financial management, hygiene, housing, loan status, familial settings, educational attainment, marital status, etc. This was done to evaluate how well the synthetic data preserved the utility for machine learning tasks.

- **Run Time Efficiency**: The document compares the computational efficiency of the algorithms, highlighting the improvements in run time due to the FAPrivBayes algorithm, which streamlines the construction of Bayesian networks.

### 4. **Performance Metrics:**
   - **Run Time:** Comparison of running time between FAPrivBayes and JTFAPB algorithms on the four datasets to highlight efficiency improvements.

### 5. **Procedure:**
   - The experiments involved executing the above algorithms on the datasets, measuring α-way query accuracy, SVM classification accuracy, and running time. The results were averaged over multiple runs to ensure reliability.

### 6. **Outcome:**
   - The JTFAPB algorithm showed significant improvements in data usability and privacy over the FAPrivBayes and other previous algorithms. The privacy budget allocation per subnet was more efficient, leading to reduced noise levels in the data.

This experimental setup was crucial for validating the effectiveness and efficiency of the JTFAPB algorithm in maintaining differential privacy while handling high-dimensional datasets.

## Python Files

### 1. `1-salarysvm.py`
This script is designed to predict a binary salary category using an SVM classifier:
- **Imports:** Uses `numpy` for numerical operations, `SVC` from `sklearn.svm` for creating the SVM classifier, and other sklearn utilities for preprocessing and splitting data.
- **Data Loading:** Reads data from a CSV file, presumably with features and labels for salary categories. The labels and features are separated, features are standardized, and the dataset is split into training and testing sets.
- **SVM Training:** A linear SVM with a regularization parameter `C` is trained on the data. It prints out the classification accuracy on the test set.
- **Execution Details:** Includes timing code to measure and print the script's running time.

### 2. `1-gendersvm.py`
This script focuses on predicting gender using an SVM classifier:
- **Data Handling:** Similar to the `1-salarysvm.py` script, it reads from a CSV, handles data preparation, and standardization.
- **Classifier Details:** Uses a linear SVM for gender classification. It prints out model accuracy upon execution.
- **Comments:** Contains specific notations for the use of columns from the dataset for training the SVM, indicating that specific features are selected based on their position in the data file.

### 3. `1-handle-adult.py`
This script handles preprocessing of data for further analysis:
- **Data Handling:** Reads from a CSV file and processes categorical variables into numeric codes, which is a typical preprocessing step before using data for machine learning.
- **Output:** The preprocessed data is saved back to a new file, indicating that this script is used in a preprocessing pipeline before analysis or modeling.

### 4. `1-educationsvm.py`, `1-martialsvm.py`, `2-carsvm.py`, `2-religionspacesvm.py`, `2-agesvm.py`, `2-childsvm.py`
- **Structure and Functionality:** These scripts follow a similar format to the `1-salarysvm.py` and `1-gendersvm.py`, focusing on different prediction tasks such as education level, marital status, car ownership, religion, age category, and number of children. 
- **Common Elements:** They would include data loading, preprocessing, SVM model training, and evaluation sections tailored to each specific attribute prediction.
**...**

##  Experimental Results
The experimental results section underscores that the JTFAPB algorithm not only enhances privacy through better noise management and fewer sub-networks but also maintains or improves data utility for machine learning purposes, evident from the α-way query accuracy and SVM classification results. Additionally, the run time data illustrate the efficiency improvements over previous methods, making the JTFAPB algorithm a more viable option for high-dimensional data privacy.
![输入图片说明](https://github.com/csmaxuebin/FAPrivBayes/blob/main/tp/acs-Q2.png)![输入图片说明](/imgs/2024-06-17/eGtHBWJUyt10MTOL.png)![输入图片说明](/imgs/2024-06-17/sMZIUxRQimDlH85Q.png)![输入图片说明](/imgs/2024-06-17/v2k5nc4zdADx9v6T.png)



```
## Update log

```
- {24.06.17} Uploaded overall framework code and readme file
```
